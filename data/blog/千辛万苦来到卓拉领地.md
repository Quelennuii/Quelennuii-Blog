---
title: åƒè¾›ä¸‡è‹¦æ¥åˆ°å“æ‹‰é¢†åœ°
date: 2024/3/4 16:14:38
lastmod: 2024/3/6 15:38:02
tags: [å®é™…åº”ç”¨]
draft: false
summary: è®°å½•è¿™ä¸ªåšå®¢å¼€å‘è¿‡ç¨‹ä¸­çš„å„ç§é—®é¢˜ï¼Œä¸ªç ´éƒ¨ç½²å¼„åˆ°å¤©éƒ½äº®äº†è°èƒ½æ‡‚å•Š
images: https://picsum.photos/800/500?random=2
authors: ['default']
layout: PostLayout
---

# éƒ¨ç½²

è¿˜ä»¥ä¸ºä¹°ä¸ªåŸŸåç‚¹ç‚¹ç‚¹å°±å®Œäº‹äº†æ²¡æƒ³åˆ°è¿™ä¹ˆéº»çƒ¦ã€‚ã€‚ã€‚ã€‚ã€‚ä» git page å¼€å§‹ç–¯ç‹‚è¸©å‘ï¼Œè¿«ä¸å¾—å·²è½¬æˆ˜ Vercelï¼Œä¸å¾—ä¸è¯´çœŸçš„æ–¹ä¾¿ï¼Œå°±æ˜¯æœ‰ä¸ªè‡´å‘½çš„é—®é¢˜

![1709536981013.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0cbcf5dd6f849f5bc20cea117a7c3f6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=595&h=452&s=15831&e=png&b=f5f5f5)

ï¼ˆå‡Œæ™¨å››ç‚¹ git page ä½ å®³æˆ‘å®³çš„å¥½è‹¦å•Šä½ ä¸ºä»€ä¹ˆå°±æ˜¯ä¸è‚¯åŠ è½½ css æ ·å¼æˆ‘å¿ƒé‡Œæœ‰äº‹ï¼‰

## vercel ä¸€é”®éƒ¨ç½²

ç‰¹åˆ«ä¼Ÿå¤§çš„å‘æ˜ï¼Œç›´æ¥ç»‘å®šå¼€å‘ä»“åº“è·Ÿåˆ†æ”¯å°±å¯ä»¥äº†ï¼Œpush æ–°ä»£ç ç›´æ¥è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿˜é€ä½ ä¸€ä¸ªå…è´¹åŸŸåï¼Œæ€ä¹ˆå°±è¢«å¢™äº†ä½ è¯´è¯´

## DNS è§£æå¼‚å¸¸

ä¸–ç•Œä¸Šæ²¡æœ‰å›°éš¾çš„å·¥ä½œåªæœ‰åŠªåŠ›çš„å°ç‹—ï¼äºæ˜¯è½¬æˆ˜é˜¿é‡Œäº‘ï¼Œä¹°å®ŒåŸŸå just ç—›è‹¦çš„å¼€å§‹ï¼Œå®åè®¤è¯å®Œå‘ç° dns è§£ææ°¸è¿œ clientHold ğŸ˜ -> ğŸ˜­

> åŸŸå quelennui.cnï¼Œæ— æ³•è§£æ æ‚¨çš„åŸŸåæ³¨å†Œå•†ä¸º Alibaba Cloud æ— æ³•è§£æçš„åŸå› ä¸º åŸŸåçŠ¶æ€ä¸º clientHoldï¼Œå¤„äºè¯¥çŠ¶æ€çš„åŸŸåä¼šè¢«æš‚åœè§£æã€‚ è§£å†³æ–¹æ³• æ‚¨éœ€è¦è”ç³»åŸŸåæ³¨å†Œå•†è§£é™¤è¯¥çŠ¶æ€ï¼Œè¯·æ‚¨é‡æ–°é€‰æ‹©â€œåŸŸåâ€äº§å“è¿›è¡Œå’¨è¯¢ æ¨èæ‚¨å‚è€ƒä»¥ä¸Šä¿¡æ¯ï¼Œå…¶ä¸å·¥ç¨‹å¸ˆæä¾›çš„å†…å®¹ä¸€è‡´ã€‚

ä¸¤å¤©å°è¯•æœªæœè¿˜æ˜¯æäº†å·¥å•

![1709537273860.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ef4a3e06b2bd469397974ae5683e2fbc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1461&h=250&s=29058&e=png&b=ffffff)

è®¤è¯å®ŒåæŠŠåŸŸåè¿‡æˆ·å°±å¯ä»¥å•¦ï¼Œdns è§£ææ­£å¸¸

![1709537386496.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/646109a7b9504ec2a31d9fc860925180~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=671&h=501&s=144873&e=png&b=fefdfd) å¥½ï¼ï¼ï¼ï¼é…ç½®è½¬å‘å¼€å§‹ï¼ï¼ï¼ï¼ï¼

## Cloudflare é…ç½®

![1709538257318.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e9bfba3273147649dc5c7aa0f165b53~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1920&h=880&s=79887&e=png&b=fefefe)

## é˜¿é‡Œäº‘é…ç½®

![1709538935616.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32885f454b6d4940a71aed3d047a72cb~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1920&h=880&s=101506&e=png&b=fdfdfd)

## vercel é…ç½®

åœ¨ vercel é…ç½®åŸŸå

![1709537897637.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90c11eb2d9674465810024f58c962aff~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1879&h=785&s=86391&e=png&b=fcfcfc)

## æœ€å

ä¼šå‡ºç°é‡å®šå‘æ¬¡æ•°å¤ªå¤šå¯¼è‡´é¡µé¢åŠ è½½é”™è¯¯çš„é—®é¢˜ï¼Œè§£å†³æ–¹å¼å°±æ˜¯åœ¨ cloudflare è®¾ç½® SSL/TLS åŠ å¯†æ¨¡å¼

![1709539175804.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbf2df2788634b71a9565f6c6509c047~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1920&h=880&s=95624&e=png&b=fefefe)

å¾ˆè®¤çœŸçš„æŸ¥äº†ä¸€ä¸‹å›½å†…çš„åŸŸåå¸ƒåœ¨å›½å¤–æœåŠ¡å™¨éœ€ä¸éœ€è¦è¿›è¡Œ ICP å¤‡æ¡ˆï¼Œæ—¢ç„¶é¦™æ¸¯æœåŠ¡å™¨éƒ½å¯ä»¥ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬ã€‚ã€‚ã€‚ã€‚

ç»“è®ºæ˜¯ä¸ç”¨ï¼è‡³å°‘ç°åœ¨æ˜¯ä¸ç”¨ï¼æˆ‘ç™½æ‰‹æŒèº«ä»½è¯æ‹äº†å¼ ç¥ä¼¼å…¥ç‹±ç…§çš„ç…§ç‰‡äº†ï¼

# ä¸Šçº¿

## é¼ æ ‡æ ·å¼é€‚é…é»‘å¤œæ¨¡å¼

æ•ˆæœæ¥è‡ª [å¦‚ä½•æ‰“é€ ä¸€æ¬¾ä¹–å·§çš„é¼ æ ‡æŒ‡é’ˆç‰¹æ•ˆ](https://juejin.cn/post/6932770913259634701?searchId=20240304183648AB069D274DACF509D52D)

ä»Šå¤©ä¸€åˆ‡é»‘å¤œæ¨¡å¼å‚»çœ¼äº†ã€‚ã€‚ã€‚ç¬¬ä¸€æ¬¡ä½“ä¼šåˆ°äº†è¿™ä¹ˆæœ‰å±‚æ¬¡çš„é»‘ã€‚ã€‚ã€‚ã€‚ã€‚é»‘èƒŒæ™¯é»‘é¼ æ ‡æ‚¨æ˜¯æ€ä¹ˆæƒ³çš„å‘¢ã€‚ã€‚ã€‚ã€‚ã€‚

é—®é¢˜ä¸å¤§ï¼Œå¼€å§‹æ”¹é€ ï¼

è¿™ä¸ªé¼ æ ‡æ ·å¼æ˜¯ç”±ä¸€ä¸ª svg å›¾ç‰‡ä½œä¸º cursorï¼Œä¸€ä¸ªåŠé€æ˜åœ†å½¢è¿½ç€è·‘ï¼ˆï¼‰å®ç°çš„

å…ˆæ”¹åœ†å½¢ï¼Œåœ¨ `#cursor` é€‰æ‹©å™¨ä¸­ä½¿ç”¨ `var(--cursor-color)` æ¥å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å±æ€§ï¼š

```css
#cursor {
  position: fixed;
  width: 16px;
  height: 16px;
  /* åŒ¹é…æš—å¤œæ¨¡å¼ */
  background: var(--cursor-color);
  border-radius: 8px;
  opacity: 0.25;
  z-index: 10086;
  pointer-events: none;
  transition: 0.2s ease-in-out;
  transition-property: background, opacity, transform;
}
```

åœ¨ `.light` ç±»å’Œ `.dark` ç±»ä¸­å®šä¹‰ä¸€ä¸ª `--cursor-color` è‡ªå®šä¹‰å±æ€§ï¼ŒTailwind çš„é¢œè‰²å·¥å…·å‡½æ•° `theme()` å¯ä»¥ç”¨æ¥æ¥è·å–é¢œè‰²å€¼

```css
.light {
  --cursor-color: theme('colors.black');
}

.dark {
  --cursor-color: theme('colors.white');
}
```

svg å›¾ç‰‡çš„ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œåœ¨ä»£ç ä¸­æ˜¯è¿™ä¹ˆå¼•å…¥çš„ï¼ˆå¥½é•¿ï¼‰

```js
this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' fill='black' opacity='.5'/></svg>") 4 4, auto}`
```

é¦–å…ˆè¿˜æ˜¯éœ€è¦é…ç½®è¯¥ä¸»é¢˜ä¸‹å¯¹åº”çš„é¢œè‰²

```css
.light {
  --cursor-color: theme('colors.black');
  --svg-color: #000;
}

.dark {
  --cursor-color: theme('colors.white');
  --svg-color: #fff;
}
```

åœ¨ SVG æ•°æ® URL ä¸­ä½¿ç”¨ `fill` å±æ€§å’Œ `var()` å‡½æ•°æ¥å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰ CSS å˜é‡ï¼Œä¾‹å¦‚

```js
document.body.appendChild((this.scr = document.createElement('style')))
this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' fill='var(--svg-color)' opacity='.5'/></svg>") 4 4, auto}`
```

åˆ‡æ¢äº†ä¸€ä¸‹ï¼Œå‘ç°æ²¡æœ‰ååº”â€¦â€¦

æœ‰ååº”æ‰æ€ªäº†å§ï¼ä½ éƒ½ä¸éœ€è¦åˆ¤æ–­ä¸€ä¸‹ä¸»é¢˜æ˜¯å¦åˆ‡æ¢äº†å—ï¼

è¿™ä¸ªåšå®¢æ¡†æ¶æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰ hook`useTheme()`æ¥è·å–å½“å‰çš„ä¸»é¢˜é¢œè‰²ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªå€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–æ¥åŠ¨æ€åˆ‡æ¢é¼ æ ‡çš„é¢œè‰²

```js
const { theme } = useTheme()

//ä¸»é¢˜å˜äº†é¼ æ ‡ä¹Ÿå¾—å˜é¢œè‰²
useEffect(() => {
  const color = theme === 'light' ? 'black' : 'white'
  if (cursorRef.current) {
    //   fill='${color}'ï¼Œå¿…é¡»å†™å•å¼•å·
    cursorRef.current.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' fill='${color}' opacity='.5'/></svg>") 4 4, auto}`
  }
}, [theme])
```

ç„¶åå°±å¯ä»¥äº†ï¼

### é¼ æ ‡é¢œè‰²å¼‚å¸¸ again

ä»Šå¤©åˆå‘ç°äº†æ–°çš„é—®é¢˜ï¼Œåœ¨æš—å¤œæ¨¡å¼ä¸‹ï¼Œé¡µé¢åˆ·æ–°åï¼Œé¼ æ ‡çš„é¢œè‰²ä¼šè¢«é‡ç½®ä¸ºé»‘è‰²ï¼ˆä¹Ÿå°±æ˜¯é»˜è®¤çŠ¶æ€ï¼‰ï¼Œå› ä¸ºæŒ‚è½½æ—¶çš„ä»£ç å¹¶ä¸ä¼šè·å–å½“å‰ä¸»é¢˜å†è¿›è¡Œåˆ¤æ–­

```js
useEffect(() => {
  cursorRef.current = new Cursor()
}, [])
```

è¿™ä¸€çœ‹å¤šç®€å•ï¼Œå°è£…ä¸‹ changeColor å‡½æ•°åˆ·æ–°åé‡æ–°æ”¹å˜ä¸‹å°±å¯ä»¥äº†

```js
useEffect(() => {
  cursorRef.current = new Cursor()
  changeColor()
}, [])
```

ä½†æ˜¯ ğŸ˜…

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96eba06af9c24c358eb66f58b42be58d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=811&h=130&s=20067&e=png&b=222222)

é—®é¢˜ä¸å¤§ï¼Œæ‹¿åˆšå­¦çš„ useCallback åŒ…ä¸€ä¸‹ï¼Œ`useCallback`Â Hook ä¼šè¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„ç‰ˆæœ¬çš„ Â `changeColor`Â  å‡½æ•°ï¼Œå®ƒåªåœ¨ Â `theme`Â  å˜åŒ–æ—¶æ”¹å˜ã€‚å› æ­¤å½“ä¾èµ–é¡¹å¯ä»¥ä¿®æ”¹ä¸º changeColorï¼ŒchangeColor å˜äº†è¯´æ˜ theme å°±å˜äº†

```js
import { useCallback, useEffect, useRef } from 'react'

// ...

const changeColor = useCallback(() => {
  const color = theme === 'light' ? 'black' : 'white'
  if (cursorRef.current) {
    cursorRef.current.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' fill='${color}' opacity='.5'/></svg>") 4 4, auto}`
  }
}, [theme])

useEffect(() => {
  changeColor()
}, [changeColor])

useEffect(() => {
  cursorRef.current = new Cursor()
  changeColor()
}, [changeColor])
```

è¿™ä¸‹ï¼Œå³ä½¿åœ¨é»‘å¤œæ¨¡å¼ä¸‹åˆ·æ–°ä¹Ÿä¼šè·å–åˆ°æ­£ç¡®çš„é¢œè‰²ï¼Œæ­£å½“æˆ‘å‡†å¤‡æä»£ç æ—¶ï¼š

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/470aa73738a74aeabe2ec30ac1034bc3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1219&h=880&s=167837&e=png&b=fefefe)

è¿™æ ·å†™æ¯æ¬¡ change éƒ½æ˜¯ new ä¸€ä¸ª Cursor å•Šï¼

é—®é¢˜ä¸å¤§ã€‚ã€‚ã€‚ã€‚å†æ¥æ¬¡é€»è¾‘åˆ¤æ–­ã€‚ã€‚ã€‚ã€‚ã€‚è€ƒè™‘çš„è¿˜æ˜¯å¤ªå°‘äº†ï¼

```js
useEffect(() => {
  if (!cursorRef.current) {
    cursorRef.current = new Cursor()
  }
  changeColor()
}, [changeColor])
```

## éšæœºå›¾ç‰‡å›ºå®š

å°é¢å›¾æ˜¯ä»[picsum.photos/](https://link.juejin.cn?target=https%3A%2F%2Fpicsum.photos%2F)æçš„ï¼Œåªè¦ä¼ å…¥[picsum.photos/200/300](https://link.juejin.cn?target=https%3A%2F%2Fpicsum.photos%2F200%2F300)ï¼Œè¾“å…¥å›¾ç‰‡å°ºå¯¸å°±ç»™ä½ éšæœºè¯·æ±‚ä¸€å¼ å›¾ç‰‡

ä½†æ˜¯åŒä¸€ url çš„å›¾ç‰‡æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå¾ˆå¥½è§£å†³ï¼Œ[picsum.photos/200/300?ranâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fpicsum.photos%2F200%2F300%3Frandom%3D1)éšä¾¿ä¼ ä¸ªå‚æ•°å°±è¡Œ

## å›¾ç‰‡åŠ è½½å¼‚å¸¸

å¼€å‘ç¯å¢ƒçœ‹ç€å¯ç¾äº†ä¸€çœ‹çº¿ä¸Šç¯å¢ƒè½»è½»ç ´é˜²äº†ã€‚ã€‚ã€‚ã€‚æˆ‘å›¾å‘¢æˆ‘è¿™ä¹ˆå¤§ä¸ªå›¾å‘¢ ğŸ˜…

æ—¢ç„¶æ˜¯çº¿ä¸Šæ‰ä¼šå‡ºé—®é¢˜é‚£å…«æˆæ˜¯ webpack æœ‰ç‚¹æ¯›ç—…ï¼Œçœ‹ä¸€ä¸‹é…ç½®

![1709548108135.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dec1dca4a9bf4f12854f96eef17874c8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=666&h=411&s=26709&e=png&b=1f1f1f)

å“¦åŸæ¥æ˜¯è·¯å¾„é…é”™äº†ã€‚ã€‚ã€‚ã€‚æˆ‘çš„å« imagesã€‚ã€‚ã€‚ã€‚é‚£ç¡®å®æ˜¯æ‰“åŒ…ä¸äº†ã€‚ã€‚ã€‚ã€‚ã€‚

ä½†æ˜¯å›¾ç‰‡ä½œä¸ºé™æ€æ–‡ä»¶ä¿å­˜çš„è¯ç¡®å®å¾ˆéº»çƒ¦ï¼Œå›¾ç‰‡å¤šäº†æ‰“åŒ…ä½“ç§¯ä¹Ÿä¼šå˜å¤§ï¼Œè¯·æ±‚çš„è¯è¿˜å¾—æä¸ªäº‘ï¼Œç»“æœåœ¨ github ä¸Šå‘ç°äº†å¾ˆå¤©æ‰çš„ä¸»æ„

ä¸Šä¼ åˆ°æ˜é‡‘ï¼
