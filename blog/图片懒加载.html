<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9163539254569883" crossorigin="anonymous"></script><title>关于各种图片懒加载</title><meta name="robots" content="follow, index"/><meta name="description" content="背八股的时候只背了监听滚动事件，调研发现竟然有这么多实现方式……小编也不知道那种比较好，下面带你看看吧"/><meta property="og:url" content="undefined/blog/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Quelennuii | 是真的挺无聊"/><meta property="og:description" content="背八股的时候只背了监听滚动事件，调研发现竟然有这么多实现方式……小编也不知道那种比较好，下面带你看看吧"/><meta property="og:title" content="关于各种图片懒加载"/><meta property="og:image" content="https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="关于各种图片懒加载"/><meta name="twitter:description" content="背八股的时候只背了监听滚动事件，调研发现竟然有这么多实现方式……小编也不知道那种比较好，下面带你看看吧"/><meta name="twitter:image" content="https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o"/><meta property="article:published_time" content="2023-05-25T03:42:17.000Z"/><meta property="article:modified_time" content="2023-05-25T03:42:17.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "undefined/blog/图片懒加载"
  },
  "headline": "关于各种图片懒加载",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o"
    }
  ],
  "datePublished": "2023-05-25T03:42:17.000Z",
  "dateModified": "2023-05-25T03:42:17.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Quelennuii"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Quelennuii",
    "logo": {
      "@type": "ImageObject",
      "url": "undefined/static/images/logo.png"
    }
  },
  "description": "背八股的时候只背了监听滚动事件，调研发现竟然有这么多实现方式……小编也不知道那种比较好，下面带你看看吧"
}</script><meta name="next-head-count" content="21"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><meta name="referrer" content="no-referrer"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/Quelennuii.github.io/_next/static/css/92b43ab1a9f9a6c9.css" as="style"/><link rel="stylesheet" href="/Quelennuii.github.io/_next/static/css/92b43ab1a9f9a6c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/Quelennuii.github.io/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/Quelennuii.github.io/_next/static/chunks/webpack-ce464721ee4e13a4.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/main-65bb1d0c5abe6865.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/pages/_app-374d24c5177500f3.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/695-3cc52403a33c1932.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/416-6bdae75613c28a9e.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/chunks/pages/blog/%5B...slug%5D-f767566067e99a67.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/Ubh1e8E6BwMkosCvnRWpr/_buildManifest.js" defer=""></script><script src="/Quelennuii.github.io/_next/static/Ubh1e8E6BwMkosCvnRWpr/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Quelennuii" href="/Quelennuii.github.io"><div class="flex items-center justify-between"><div class="mr-3"><svg class="w-10" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M731.443 731.443h48.743v48.743h-48.743zm-48.793 48.743h48.793v48.742H682.65zm243.814 0h48.794v48.742h-48.794zm-48.742 48.742h48.742v48.794h-48.742z" fill="#012777"></path><path d="M877.722 780.186h48.742v48.742h-48.742z" fill="#375AA4"></path><path d="M877.722 731.443h48.742v48.743h-48.742zm-48.794 146.279h48.794v48.742h-48.794z" fill="#012777"></path><path d="M828.928 828.928h48.794v48.794h-48.794z" fill="#375AA4"></path><path d="M828.928 780.186h48.794v48.742h-48.794zM828.928 731.443h48.794v48.743h-48.794z" fill="#A2D8EA"></path><path d="M828.928 682.65h48.794v48.793h-48.794zm0-146.279h48.794v48.794h-48.794zm0-48.742h48.794v48.742h-48.794zm0-48.794h48.794v48.794h-48.794zm0-48.742h48.794v48.742h-48.794zm0-48.743h48.794v48.743h-48.794zm0-48.793h48.794v48.793h-48.794zm0-48.743h48.794v48.743h-48.794zm-48.742 682.65h48.742v48.794h-48.742z" fill="#012777"></path><path d="M780.186 877.722h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742z" fill="#375AA4"></path><path d="M780.186 780.186h48.742v48.742h-48.742z" fill="#A2D8EA"></path><path d="M780.186 731.443h48.742v48.743h-48.742zm0-146.278h48.742v48.742h-48.742z" fill="#012777"></path><path d="M780.186 536.371h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742zm0-48.743h48.742v48.743h-48.742zm0-48.793h48.742v48.793h-48.742zm0-48.743h48.742v48.743h-48.742z" fill="#DEE6FC"></path><path d="M780.186 195.072h48.742v48.742h-48.742zm-48.743 682.65h48.743v48.742h-48.743z" fill="#012777"></path><path d="M731.443 828.928h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743z" fill="#A2D8EA"></path><path d="M731.443 633.907h48.743v48.743h-48.743z" fill="#012777"></path><path d="M731.443 585.165h48.743v48.742h-48.743z" fill="#DEE6FC"></path><path d="M731.443 536.371h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743zm0-48.794h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743zm0-48.743h48.743v48.743h-48.743zm0-48.793h48.743v48.793h-48.743zm0-48.743h48.743v48.743h-48.743z" fill="#DD75A1"></path><path d="M731.443 195.072h48.743v48.742h-48.743z" fill="#DEE6FC"></path><path d="M731.443 146.278h48.743v48.794h-48.743zm-48.793 682.65h48.793v48.794H682.65zm0-195.02h48.793v48.742H682.65z" fill="#012777"></path><path d="M682.65 585.165h48.793v48.742H682.65z" fill="#DEE6FC"></path><path d="M682.65 536.371h48.793v48.794H682.65zm0-48.742h48.793v48.742H682.65zm0-48.794h48.793v48.794H682.65z" fill="#DD75A1"></path><path d="M682.65 390.093h48.793v48.742H682.65z" fill="#012777"></path><path d="M682.65 341.35h48.793v48.743H682.65zm0-48.793h48.793v48.793H682.65zm0-48.743h48.793v48.743H682.65z" fill="#DD75A1"></path><path d="M682.65 195.072h48.793v48.742H682.65z" fill="#DEE6FC"></path><path d="M682.65 146.278h48.793v48.794H682.65zM633.907 682.65h48.743v48.793h-48.743z" fill="#012777"></path><path d="M633.907 633.907h48.743v48.743h-48.743z" fill="#DEE6FC"></path><path d="M633.907 585.165h48.743v48.742h-48.743zm0-48.794h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743z" fill="#DD75A1"></path><path d="M633.907 438.835h48.743v48.794h-48.743z" fill="#012777"></path><path d="M633.907 390.093h48.743v48.742h-48.743z" fill="#DEE6FC"></path><path d="M633.907 341.35h48.743v48.743h-48.743z" fill="#012777"></path><path d="M633.907 292.557h48.743v48.793h-48.743zm0-48.743h48.743v48.743h-48.743zM633.907 195.072h48.743v48.742h-48.743z" fill="#DD75A1"></path><path d="M633.907 146.278h48.743v48.794h-48.743z" fill="#DEE6FC"></path><path d="M633.907 97.536h48.743v48.742h-48.743zM585.165 682.65h48.742v48.793h-48.742z" fill="#012777"></path><path d="M585.165 633.907h48.742v48.743h-48.742z" fill="#DEE6FC"></path><path d="M585.165 585.165h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742z" fill="#DD75A1"></path><path d="M585.165 438.835h48.742v48.794h-48.742z" fill="#012777"></path><path d="M585.165 390.093h48.742v48.742h-48.742z" fill="#DEE6FC"></path><path d="M585.165 341.35h48.742v48.743h-48.742z" fill="#012777"></path><path d="M585.165 292.557h48.742v48.793h-48.742zm0-48.743h48.742v48.743h-48.742zM585.165 195.072h48.742v48.742h-48.742z" fill="#DD75A1"></path><path d="M585.165 146.278h48.742v48.794h-48.742z" fill="#DEE6FC"></path><path d="M585.165 97.536h48.742v48.742h-48.742zM536.37 731.443h48.794v48.743H536.37z" fill="#012777"></path><path d="M536.371 682.65h48.794v48.793H536.37z" fill="#DEE6FC"></path><path d="M536.371 633.907h48.794v48.743H536.37zm0-48.742h48.794v48.742H536.37z" fill="#DD75A1"></path><path d="M536.371 536.371h48.794v48.794H536.37zm0-48.742h48.794v48.742H536.37z" fill="#012777"></path><path d="M536.371 438.835h48.794v48.794H536.37z" fill="#DEE6FC"></path><path d="M536.371 390.093h48.794v48.742H536.37z" fill="#DD75A1"></path><path d="M536.371 341.35h48.794v48.743H536.37z" fill="#DEE6FC"></path><path d="M536.371 292.557h48.794v48.793H536.37zm0-48.743h48.794v48.743H536.37z" fill="#012777"></path><path d="M536.371 195.072h48.794v48.742H536.37zm0-48.794h48.794v48.794H536.37z" fill="#DD75A1"></path><path d="M536.371 97.536h48.794v48.742H536.37z" fill="#DEE6FC"></path><path d="M536.371 48.742h48.794v48.794H536.37zM487.63 731.443h48.742v48.743H487.63z" fill="#012777"></path><path d="M487.629 682.65h48.742v48.793H487.63z" fill="#DEE6FC"></path><path d="M487.629 633.907h48.742v48.743H487.63z" fill="#DD75A1"></path><path d="M487.629 585.165h48.742v48.742H487.63z" fill="#012777"></path><path d="M487.629 536.371h48.742v48.794H487.63zm0-48.742h48.742v48.742H487.63z" fill="#DEE6FC"></path><path d="M487.629 438.835h48.742v48.794H487.63zm0-48.742h48.742v48.742H487.63zm0-48.743h48.742v48.743H487.63z" fill="#DD75A1"></path><path d="M487.629 292.557h48.742v48.793H487.63zm0-48.743h48.742v48.743H487.63z" fill="#DEE6FC"></path><path d="M487.629 195.072h48.742v48.742H487.63z" fill="#012777"></path><path d="M487.629 146.278h48.742v48.794H487.63z" fill="#DD75A1"></path><path d="M487.629 97.536h48.742v48.742H487.63z" fill="#DEE6FC"></path><path d="M487.629 48.742h48.742v48.794H487.63zm-48.794 682.701h48.794v48.743h-48.794z" fill="#012777"></path><path d="M438.835 682.65h48.794v48.793h-48.794z" fill="#DEE6FC"></path><path d="M438.835 633.907h48.794v48.743h-48.794zm0-48.742h48.794v48.742h-48.794z" fill="#DD75A1"></path><path d="M438.835 536.371h48.794v48.794h-48.794zm0-48.742h48.794v48.742h-48.794z" fill="#012777"></path><path d="M438.835 438.835h48.794v48.794h-48.794z" fill="#DEE6FC"></path><path d="M438.835 390.093h48.794v48.742h-48.794z" fill="#DD75A1"></path><path d="M438.835 341.35h48.794v48.743h-48.794z" fill="#DEE6FC"></path><path d="M438.835 292.557h48.794v48.793h-48.794zm0-48.743h48.794v48.743h-48.794z" fill="#012777"></path><path d="M438.835 195.072h48.794v48.742h-48.794zm0-48.794h48.794v48.794h-48.794z" fill="#DD75A1"></path><path d="M438.835 97.536h48.794v48.742h-48.794z" fill="#DEE6FC"></path><path d="M438.835 48.742h48.794v48.794h-48.794zM390.093 682.65h48.742v48.793h-48.742z" fill="#012777"></path><path d="M390.093 633.907h48.742v48.743h-48.742z" fill="#DEE6FC"></path><path d="M390.093 585.165h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742z" fill="#DD75A1"></path><path d="M390.093 438.835h48.742v48.794h-48.742z" fill="#012777"></path><path d="M390.093 390.093h48.742v48.742h-48.742z" fill="#DEE6FC"></path><path d="M390.093 341.35h48.742v48.743h-48.742z" fill="#012777"></path><path d="M390.093 292.557h48.742v48.793h-48.742zm0-48.743h48.742v48.743h-48.742zM390.093 195.072h48.742v48.742h-48.742z" fill="#DD75A1"></path><path d="M390.093 146.278h48.742v48.794h-48.742z" fill="#DEE6FC"></path><path d="M390.093 97.536h48.742v48.742h-48.742zM341.35 682.65h48.743v48.793H341.35z" fill="#012777"></path><path d="M341.35 633.907h48.743v48.743H341.35z" fill="#DEE6FC"></path><path d="M341.35 585.165h48.743v48.742H341.35zm0-48.794h48.743v48.794H341.35zm0-48.742h48.743v48.742H341.35z" fill="#DD75A1"></path><path d="M341.35 438.835h48.743v48.794H341.35z" fill="#012777"></path><path d="M341.35 390.093h48.743v48.742H341.35z" fill="#DEE6FC"></path><path d="M341.35 341.35h48.743v48.743H341.35z" fill="#012777"></path><path d="M341.35 292.557h48.743v48.793H341.35zm0-48.743h48.743v48.743H341.35zM341.35 195.072h48.743v48.742H341.35z" fill="#DD75A1"></path><path d="M341.35 146.278h48.743v48.794H341.35z" fill="#DEE6FC"></path><path d="M341.35 97.536h48.743v48.742H341.35zm-48.793 731.392h48.793v48.794h-48.793zm0-48.742h48.793v48.742h-48.793zm0-146.279h48.793v48.743h-48.793z" fill="#012777"></path><path d="M292.557 585.165h48.793v48.742h-48.793z" fill="#DEE6FC"></path><path d="M292.557 536.371h48.793v48.794h-48.793zm0-48.742h48.793v48.742h-48.793zm0-48.794h48.793v48.794h-48.793z" fill="#DD75A1"></path><path d="M292.557 390.093h48.793v48.742h-48.793z" fill="#012777"></path><path d="M292.557 341.35h48.793v48.743h-48.793zm0-48.793h48.793v48.793h-48.793zm0-48.743h48.793v48.743h-48.793z" fill="#DD75A1"></path><path d="M292.557 195.072h48.793v48.742h-48.793z" fill="#DEE6FC"></path><path d="M292.557 146.278h48.793v48.794h-48.793zm-48.743 731.444h48.743v48.742h-48.743z" fill="#012777"></path><path d="M243.814 828.928h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743z" fill="#A2D8EA"></path><path d="M243.814 731.443h48.743v48.743h-48.743zm0-97.536h48.743v48.743h-48.743z" fill="#012777"></path><path d="M243.814 585.165h48.743v48.742h-48.743z" fill="#DEE6FC"></path><path d="M243.814 536.371h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743zm0-48.794h48.743v48.794h-48.743zm0-48.742h48.743v48.742h-48.743zm0-48.743h48.743v48.743h-48.743zm0-48.793h48.743v48.793h-48.743zm0-48.743h48.743v48.743h-48.743z" fill="#DD75A1"></path><path d="M243.814 195.072h48.743v48.742h-48.743z" fill="#DEE6FC"></path><path d="M243.814 146.278h48.743v48.794h-48.743zm-48.742 780.186h48.742v48.794h-48.742z" fill="#012777"></path><path d="M195.072 877.722h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742z" fill="#375AA4"></path><path d="M195.072 780.186h48.742v48.742h-48.742z" fill="#A2D8EA"></path><path d="M195.072 731.443h48.742v48.743h-48.742zm0-146.278h48.742v48.742h-48.742z" fill="#012777"></path><path d="M195.072 536.371h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742zm0-48.794h48.742v48.794h-48.742zm0-48.742h48.742v48.742h-48.742zm0-48.743h48.742v48.743h-48.742zm0-48.793h48.742v48.793h-48.742zm0-48.743h48.742v48.743h-48.742z" fill="#DEE6FC"></path><path d="M195.072 195.072h48.742v48.742h-48.742zm-48.794 682.65h48.794v48.742h-48.794z" fill="#012777"></path><path d="M146.278 828.928h48.794v48.794h-48.794z" fill="#375AA4"></path><path d="M146.278 780.186h48.794v48.742h-48.794zM146.278 731.443h48.794v48.743h-48.794z" fill="#A2D8EA"></path><path d="M146.278 682.65h48.794v48.793h-48.794zm0-146.279h48.794v48.794h-48.794zm0-48.742h48.794v48.742h-48.794zm0-48.794h48.794v48.794h-48.794zm0-48.742h48.794v48.742h-48.794zm0-48.743h48.794v48.743h-48.794zm0-48.793h48.794v48.793h-48.794zm0-48.743h48.794v48.743h-48.794zM97.536 828.928h48.742v48.794H97.536z" fill="#012777"></path><path d="M97.536 780.186h48.742v48.742H97.536z" fill="#375AA4"></path><path d="M97.536 731.443h48.742v48.743H97.536zm-48.794 48.743h48.794v48.742H48.742z" fill="#012777"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Quelennuii</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/Quelennuii.github.io/blog">文章</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/Quelennuii.github.io/tags">标签</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/Quelennuii.github.io/about">关于</a></div><div class="ml-1 mr-1 flex items-center sm:ml-4"><button aria-label="Toggle Dark Mode" type="button" class="h-7 w-7 rounded p-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-50 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/Quelennuii.github.io/blog">文章</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/Quelennuii.github.io/tags">标签</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/Quelennuii.github.io/about">关于</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div style="transform:translateX(-100%)" class="fixed left-0 top-0 h-1 w-full bg-primary-500 backdrop-blur-3xl transition-transform duration-150"></div><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-05-25T03:42:17.000Z">2023年5月25日星期四</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">关于各种图片懒加载</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><div class=""><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" src="/static/images/avatar.png" width="38px" height="38px" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">作者</dt><dd class="text-gray-900 dark:text-gray-100">Quelennuii</dd></dl></li></ul></dd></dl><h2 class="pt-6 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400">目录</h2><ul class="py-4 text-sm font-medium leading-relaxed xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><li class="false"><a class="text-primary-500" href="#原理">原理</a></li><li class="false"><a class="text-primary-500" href="#方法一-lazyload-插件">方法一 lazyload 插件</a></li><li class="false"><a class="text-primary-500" href="#vue2">vue2</a></li><li class="false"><a class="text-primary-500" href="#vue3">vue3</a></li><li class="false"><a class="text-primary-500" href="#方法二-intersectionobserve">方法二 IntersectionObserve()</a></li><li class="false"><a class="text-primary-500" href="#原理">原理</a></li><li class="false"><a class="text-primary-500" href="#hook">hook</a></li><li class="false"><a class="text-primary-500" href="#基本用法">基本用法</a></li><li class="false"><a class="text-primary-500" href="#方法三-loadinglazy">方法三 loading=&quot;lazy&quot;</a></li><li class="false"><a class="text-primary-500" href="#基本用法">基本用法</a></li><li class="false"><a class="text-primary-500" href="#兼容性">兼容性</a></li><li class="false"><a class="text-primary-500" href="#方法四-滚动监听scrolltopoffsettopinnerheight">方法四 滚动监听+scrollTop+offsetTop+innerHeight</a></li><li class="false"><a class="text-primary-500" href="#方法五滚动监听getboundingclientrect">方法五：滚动监听+getBoundingClientRect()</a></li><li class="false"><a class="text-primary-500" href="#缺点">缺点</a></li></ul></div><div class="xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="mt-6"><img alt="关于各种图片懒加载" class="w-full rounded object-cover shadow-lg" src="https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o"/></div><div class="prose max-w-none break-words pb-8 pt-10 dark:prose-dark"><p>字多不看版：安装插件最省事并且适配的情况也多 🤣</p><h1 id="原理"><a href="#原理" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>原理</h1><p>1、存储图片的真实路径，把图片的真实路径绑定给一个以 data 开头的自定义属性 data-src 即可，页面中的 img 元素，如果没有 src 属性，浏览器就不会发出请求去下载图片（没有请求就提高了性能）</p><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loaded.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加载中...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></code></pre></div><p>2、设置 img 的默认 src 为其他图片（所有的 img 都用这一张，只会发送一次请求）</p><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>  <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1px.gif<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</span></code></pre></div><p>3、需要一个滚动事件，判断元素是否在浏览器窗口，一旦进入视口才进行加载，当滚动加载的时候，就把这张图片替换为真正的 url 地址（也就是 data-src 里保存的值）</p><p>4、等到图片进入视口后，利用 js 提取 data-src 的真实图片地址赋值给 src 属性，就会去发送请求加载图片，真正实现了按需加载</p><p>实现图片懒加载的多种方法的区别就在于判断元素是否进入视口的方式不同，当使用方法四和方法五时，如果发生滚动事件，会产生大量的循环和判断操作判断图片是否可视区里，因此需要用节流进行优化。</p><h1 id="方法一-lazyload-插件"><a href="#方法一-lazyload-插件" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>方法一 lazyload 插件</h1><h2 id="vue2"><a href="#vue2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>vue2</h2><p>github 地址：<a target="_blank" rel="noopener noreferrer" href="https://github.com/hilongjw/vue-lazyload">GitHub - hilongjw/vue-lazyload: A Vue.js plugin for lazyload your Image or Component in your applica</a></p><p>原理：<a target="_blank" rel="noopener noreferrer" href="https://blog.csdn.net/babyxue/article/details/82986160?spm=1001.2014.3001.5506">Vue-lazyload 原理详解之源码解析<em>lazyload 实现原理</em>小七的玩偶的博客-CSDN 博客</a></p><p>vue-lazyload 的核心原理是利用了<code>IntersectionObserver</code> API，这是一个用于检测元素是否与视口相交的 API，它可以高效地监听元素的可见性变化，并触发回调函数。</p><p>vue-lazyload 在注册插件时，会创建一个全局的<code>IntersectionObserver</code>实例，并设置一些选项，如阈值（threshold）、根元素（root）等。然后，在绑定 v-lazy 指令时，会创建一个监听器（listener）对象，并将其添加到一个监听器队列（listenerQueue）中。每个监听器对象都包含了元素的相关信息，如状态（state）、图片地址（src）等。</p><p>接下来，vue-lazyload 会遍历监听器队列，并调用<code>IntersectionObserver</code>实例的<code>observe</code>方法，将每个元素注册到观察者中。当元素与视口相交时，<code>IntersectionObserver</code>实例会触发回调函数，并传入一个 entries 参数，表示所有被观察的元素的状态信息。vue-lazyload 会根据 entries 中的<code>isIntersecting</code>属性判断元素是否可见，如果是，则调用监听器对象的<code>load</code>方法，将元素的 src 或者 style 属性替换为真实的图片地址，并将该监听器对象从队列中移除。</p><p>安装</p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line">npm i vue<span class="token operator">-</span>lazyload<span class="token decorator"><span class="token operator at">@</span><span class="token function">1</span></span><span class="token number">.2</span><span class="token number">.3</span> <span class="token operator">-</span><span class="token constant">S</span>
</span></code></pre></div><p>main.ts</p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line"><span class="token comment">// 1.图片懒加载插件</span>
</span><span class="code-line"><span class="token keyword">import</span> VueLazyload <span class="token keyword">from</span> <span class="token string">&#x27;vue-lazyload&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 2.注册插件</span>
</span><span class="code-line">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueLazyload<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">//参数配置 可不填</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 懒加载默认加载图片</span>
</span><span class="code-line">  loading<span class="token operator">:</span> <span class="token string">&#x27;xxx.png&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// 加载失败后加载的图片</span>
</span><span class="code-line">  error<span class="token operator">:</span> <span class="token string">&#x27;xxx.png&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  preLoad<span class="token operator">:</span> <span class="token number">1.3</span><span class="token punctuation">,</span> <span class="token comment">// 预加载高度的比例</span>
</span><span class="code-line">  attempt<span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// 尝试加载次数</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><p>可选参数配置项</p><p>vue-lazyload 提供了一个自定义指令 v-lazy，可以在 img 标签或者任何需要设置背景图片的标签上使用它。例如：</p><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line"><span class="token comment">&lt;!-- 懒加载img标签 --&gt;</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>imgUrl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">&lt;!-- 懒加载背景图片 --&gt;</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-lazy:</span>background-image</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bgUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></code></pre></div><p>v-lazy 指令接收一个字符串类型的值，表示图片的地址。如果是背景图片，需要在指令后加上<code>:background-image</code>修饰符。</p><p>当页面滚动时，vue-lazyload 会检测元素是否进入可视区域，如果是，则替换元素的 src 或者 style 属性，从而实现懒加载。</p><p><strong>注意：若图片为循环渲染、分页显示，则必须写 key 值，不然切换页面后页面视图不刷新</strong></p><h2 id="vue3"><a href="#vue3" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>vue3</h2><p>github 地址：<a target="_blank" rel="noopener noreferrer" href="https://github.com/caozhong1996/vue-lazyload-next">GitHub - caozhong1996/vue-lazyload-next: vue-lazyload for vue3</a></p><p>原理与使用方法与 vue2 版本插件相同，仅安装不同</p><p>安装</p><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line">npm i vue-lazyload-next -S
</span></code></pre></div><p>main.ts</p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line"><span class="token keyword">import</span> VueLazyloadNext <span class="token keyword">from</span> <span class="token string">&#x27;vue-lazyload-next&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueLazyloadNext<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 添加一些配置参数 可不填</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 懒加载默认加载图片</span>
</span><span class="code-line">  loading<span class="token operator">:</span> <span class="token string">&#x27;xxx.png&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// 加载失败后加载的图片</span>
</span><span class="code-line">  error<span class="token operator">:</span> <span class="token string">&#x27;xxx.png&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  preLoad<span class="token operator">:</span> <span class="token number">1.3</span><span class="token punctuation">,</span> <span class="token comment">// 预加载高度的比例</span>
</span><span class="code-line">  attempt<span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// 尝试加载次数</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h1 id="方法二-intersectionobserve"><a href="#方法二-intersectionobserve" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>方法二 IntersectionObserve()</h1><p>API：<a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver">IntersectionObserver - Web API 接口参考 | MDN</a></p><h2 id="原理-1"><a href="#原理-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>原理</h2><p>Intersection Observer 是是浏览器原生提供的构造函数，使用它能省到大量的循环和判断。这个构造函数的作用是它能够观察可视窗口与目标元素产生的交叉区域。简单来说就是当用它观察我们的图片时，当图片出现或者消失在可视窗口，它都能知道并且会执行一个特殊的回调函数，就可以利用这个回调函数实现需要的操作。</p><h2 id="hook"><a href="#hook" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>hook</h2><p>vue3 中选择用 hook 进行集成</p><p>useLazyload.ts 文件</p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line"><span class="token comment">// 定义自定义指令</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">defineDirective</span> <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#x27;lazy&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">mounted</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLImageElement<span class="token punctuation">,</span> bindings<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// el表示使用指令的DOM元素</span>
</span><span class="code-line">      <span class="token comment">// 指令的功能：实现图片的懒加载</span>
</span><span class="code-line">      <span class="token comment">// 1、监听图片是否进入可视区</span>
</span><span class="code-line">      <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// true；进入可视区域，false：未进入可视区域</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token comment">// 1、给图片的src属性赋值图片的地址</span>
</span><span class="code-line">          el<span class="token punctuation">.</span>src <span class="token operator">=</span> bindings<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token comment">// 2、取消图片的监听，默认是会一直监听的，如果不取消。就会一直执行</span>
</span><span class="code-line">          <span class="token comment">// eslint-disable-next-line spellcheck/spell-checker</span>
</span><span class="code-line">          observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token comment">// 监听dom元素</span>
</span><span class="code-line">      observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 自定义指令</span>
</span><span class="code-line">    <span class="token function">defineDirective</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="基本用法"><a href="#基本用法" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>基本用法</h2><p>main.ts</p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line"><span class="token keyword">import</span> lazy <span class="token keyword">from</span> <span class="token string">&#x27;./hooks/useLazy&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>lazy<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>对需要进行懒加载的 img 标签，直接将<code>:src</code>替换为<code>v-lazy</code></p><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isCI ? data.rendered_result_image_url : data.rendered_standard_image_url<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">v-lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isCI ? data.rendered_result_image_url : data.rendered_standard_image_url<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token punctuation">/&gt;</span></span>
</span></code></pre></div><p><strong>注意：若图片为循环渲染、分页显示，则必须写 key 值，不然切换页面后页面视图不刷新</strong></p><h1 id="方法三-loadinglazy"><a href="#方法三-loadinglazy" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>方法三 loading=&quot;lazy&quot;</h1><p>HTML 新增 loading 属性</p><h2 id="基本用法-1"><a href="#基本用法-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>基本用法</h2><div class="relative"><pre><code class="code-highlight language-HTML"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</span></code></pre></div><p>loading 属性支持 3 种属性值：</p><ul><li>auto 浏览器默认的懒加载策略，和不增加这个属性的表现一样</li><li>lazy 在资源距当前视窗到了特定距离内后再开始加载</li><li>eager 立即加载，无论资源在页面中什么位置</li></ul><p><strong>图片必须声明 width 和 height，不然会看到布局发生移动</strong></p><h2 id="兼容性"><a href="#兼容性" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>兼容性</h2><p><a target="_blank" rel="noopener noreferrer" href="https://caniuse.com/?search=loading">https://caniuse.com/?search=loading</a></p><h1 id="方法四-滚动监听scrolltopoffsettopinnerheight"><a href="#方法四-滚动监听scrolltopoffsettopinnerheight" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>方法四 滚动监听+scrollTop+offsetTop+innerHeight</h1><p>如何判断元素是否到达可视区域</p><ul><li><code>window.innerHeight</code> 是浏览器可视区的高度；</li><li><code>document.body.scrollTop || document.documentElement.scrollTop</code>是浏览器滚动的过的距离；</li><li><code>imgs.offsetTop</code> 是元素顶部距离文档顶部的高度（包括滚动条的距离）；</li><li>内容达到显示区域： <code>img.offsetTop &lt; window.innerHeight + document.body.scrollTop;</code></li><li>到达可视区域后，<code>imgs[i].src = imgs[i].getAttribute(&#x27;data-src&#x27;) as string;</code>将 data-src 属性值赋值给 src，实现懒加载</li></ul><p>但在集成过程中发现，由于 img 父元素标签没有设置高度，<code>scrollTop</code>始终为 0，无法实现动态计算<code>window.innerHeight + document.body.scrollTop</code>的值</p><h1 id="方法五滚动监听getboundingclientrect"><a href="#方法五滚动监听getboundingclientrect" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>方法五：滚动监听+getBoundingClientRect()</h1><p>API:<a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect">Element.getBoundingClientRect() - Web API 接口参考 | MDN</a></p><div class="relative"><pre><code class="code-highlight language-TypeScript"><span class="code-line"><span class="token comment">//获取所有img标签</span>
</span><span class="code-line"><span class="token keyword">const</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#x27;img&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">   <span class="token comment">//用于首屏加载</span>
</span><span class="code-line">  <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">//添加滚动事件监听</span>
</span><span class="code-line">  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;scroll&#x27;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>lazyLoad<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token function">onUnMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;scroll&#x27;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>lazyLoad<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 节流</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function function-variable">apply</span><span class="token operator">:</span> <span class="token punctuation">(</span>arg0<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> arg1<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> t<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> interval <span class="token operator">=</span> t <span class="token operator">||</span> <span class="token number">500</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">lazyLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> offsetHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> oBounding <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回一个矩形对象，包含上下左右的偏移值</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&lt;=</span> oBounding<span class="token punctuation">.</span>top <span class="token operator">&amp;&amp;</span> oBounding<span class="token punctuation">.</span>top <span class="token operator">&lt;=</span> offsetHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">//     //性能优化 进行判断 已经加载的不会再进行加载</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;alt&#x27;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&#x27;loaded&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;data-src&#x27;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;alt&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;loaded&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="缺点"><a href="#缺点" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>缺点</h2><ul><li>挂载时需要立刻调用 lazyLoad 函数，不然首屏不会加载；若需要图片分页，切换分页后不会也主动加载，需要调用 lazyLoad 方法</li><li>同样需要给图片设置 key 值，不然分页图片不刷新</li></ul></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">标签</h2><div class="mt-3 flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/Quelennuii.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">性能优化</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">上一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/Quelennuii.github.io/blog/%E8%9E%BA%E4%B8%9D%E6%98%AF%E6%80%8E%E4%B9%88%E6%8B%A7%E7%9A%84">螺丝是怎么拧的</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/Quelennuii.github.io/blog">← 返回文章列表</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:gintoki1011@126.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/Quelennuii"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>© 2024</div><div> • </div><a href="/Quelennuii.github.io">Quelennuii | 是真的挺无聊</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=\u003e{for(var c in s)t(a,c,{get:s[c],enumerable:!0})},i=(a,s,c,e)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of h(s))!u.call(a,l)\u0026\u0026l!==c\u0026\u0026t(a,l,{get:()=\u003es[l],enumerable:!(e=p(s,l))||e.enumerable});return a};var g=(a,s,c)=\u003e(c=a!=null?d(m(a)):{},i(s||!a||!a.__esModule?t(c,\"default\",{value:a,enumerable:!0}):c,a)),y=a=\u003ei(t({},\"__esModule\",{value:!0}),a);var r=N((w,o)=\u003e{o.exports=_jsx_runtime});var z={};k(z,{default:()=\u003ev,frontmatter:()=\u003ef});var n=g(r()),f={title:\"\\u5173\\u4E8E\\u5404\\u79CD\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\",date:\"2023/5/25 11:42:17\",lastmod:\"2023/5/25 11:42:17\",tags:[\"\\u6027\\u80FD\\u4F18\\u5316\"],draft:!1,summary:\"\\u80CC\\u516B\\u80A1\\u7684\\u65F6\\u5019\\u53EA\\u80CC\\u4E86\\u76D1\\u542C\\u6EDA\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u8C03\\u7814\\u53D1\\u73B0\\u7ADF\\u7136\\u6709\\u8FD9\\u4E48\\u591A\\u5B9E\\u73B0\\u65B9\\u5F0F\\u2026\\u2026\\u5C0F\\u7F16\\u4E5F\\u4E0D\\u77E5\\u9053\\u90A3\\u79CD\\u6BD4\\u8F83\\u597D\\uFF0C\\u4E0B\\u9762\\u5E26\\u4F60\\u770B\\u770B\\u5427\",images:\"https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o\",authors:[\"default\"],layout:\"PostLayout\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({p:\"p\",h1:\"h1\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\",h2:\"h2\",em:\"em\",strong:\"strong\",ul:\"ul\",li:\"li\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\u5B57\\u591A\\u4E0D\\u770B\\u7248\\uFF1A\\u5B89\\u88C5\\u63D2\\u4EF6\\u6700\\u7701\\u4E8B\\u5E76\\u4E14\\u9002\\u914D\\u7684\\u60C5\\u51B5\\u4E5F\\u591A \\u{1F923}\"}),(0,n.jsxs)(e.h1,{id:\"\\u539F\\u7406\",children:[(0,n.jsx)(e.a,{href:\"#\\u539F\\u7406\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u539F\\u7406\"]}),(0,n.jsx)(e.p,{children:\"1\\u3001\\u5B58\\u50A8\\u56FE\\u7247\\u7684\\u771F\\u5B9E\\u8DEF\\u5F84\\uFF0C\\u628A\\u56FE\\u7247\\u7684\\u771F\\u5B9E\\u8DEF\\u5F84\\u7ED1\\u5B9A\\u7ED9\\u4E00\\u4E2A\\u4EE5 data \\u5F00\\u5934\\u7684\\u81EA\\u5B9A\\u4E49\\u5C5E\\u6027 data-src \\u5373\\u53EF\\uFF0C\\u9875\\u9762\\u4E2D\\u7684 img \\u5143\\u7D20\\uFF0C\\u5982\\u679C\\u6CA1\\u6709 src \\u5C5E\\u6027\\uFF0C\\u6D4F\\u89C8\\u5668\\u5C31\\u4E0D\\u4F1A\\u53D1\\u51FA\\u8BF7\\u6C42\\u53BB\\u4E0B\\u8F7D\\u56FE\\u7247\\uFF08\\u6CA1\\u6709\\u8BF7\\u6C42\\u5C31\\u63D0\\u9AD8\\u4E86\\u6027\\u80FD\\uFF09\"}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-HTML\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"class\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"scrollLoading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"data-src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"loaded.html\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"\\u52A0\\u8F7D\\u4E2D...\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})})}),(0,n.jsx)(e.p,{children:\"2\\u3001\\u8BBE\\u7F6E img \\u7684\\u9ED8\\u8BA4 src \\u4E3A\\u5176\\u4ED6\\u56FE\\u7247\\uFF08\\u6240\\u6709\\u7684 img \\u90FD\\u7528\\u8FD9\\u4E00\\u5F20\\uFF0C\\u53EA\\u4F1A\\u53D1\\u9001\\u4E00\\u6B21\\u8BF7\\u6C42\\uFF09\"}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-HTML\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),\"  \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"data-src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"xxx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"1px.gif\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"width\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"180\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"height\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"180\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]})})}),(0,n.jsx)(e.p,{children:\"3\\u3001\\u9700\\u8981\\u4E00\\u4E2A\\u6EDA\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u5224\\u65AD\\u5143\\u7D20\\u662F\\u5426\\u5728\\u6D4F\\u89C8\\u5668\\u7A97\\u53E3\\uFF0C\\u4E00\\u65E6\\u8FDB\\u5165\\u89C6\\u53E3\\u624D\\u8FDB\\u884C\\u52A0\\u8F7D\\uFF0C\\u5F53\\u6EDA\\u52A8\\u52A0\\u8F7D\\u7684\\u65F6\\u5019\\uFF0C\\u5C31\\u628A\\u8FD9\\u5F20\\u56FE\\u7247\\u66FF\\u6362\\u4E3A\\u771F\\u6B63\\u7684 url \\u5730\\u5740\\uFF08\\u4E5F\\u5C31\\u662F data-src \\u91CC\\u4FDD\\u5B58\\u7684\\u503C\\uFF09\"}),(0,n.jsx)(e.p,{children:\"4\\u3001\\u7B49\\u5230\\u56FE\\u7247\\u8FDB\\u5165\\u89C6\\u53E3\\u540E\\uFF0C\\u5229\\u7528 js \\u63D0\\u53D6 data-src \\u7684\\u771F\\u5B9E\\u56FE\\u7247\\u5730\\u5740\\u8D4B\\u503C\\u7ED9 src \\u5C5E\\u6027\\uFF0C\\u5C31\\u4F1A\\u53BB\\u53D1\\u9001\\u8BF7\\u6C42\\u52A0\\u8F7D\\u56FE\\u7247\\uFF0C\\u771F\\u6B63\\u5B9E\\u73B0\\u4E86\\u6309\\u9700\\u52A0\\u8F7D\"}),(0,n.jsx)(e.p,{children:\"\\u5B9E\\u73B0\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\\u7684\\u591A\\u79CD\\u65B9\\u6CD5\\u7684\\u533A\\u522B\\u5C31\\u5728\\u4E8E\\u5224\\u65AD\\u5143\\u7D20\\u662F\\u5426\\u8FDB\\u5165\\u89C6\\u53E3\\u7684\\u65B9\\u5F0F\\u4E0D\\u540C\\uFF0C\\u5F53\\u4F7F\\u7528\\u65B9\\u6CD5\\u56DB\\u548C\\u65B9\\u6CD5\\u4E94\\u65F6\\uFF0C\\u5982\\u679C\\u53D1\\u751F\\u6EDA\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u4F1A\\u4EA7\\u751F\\u5927\\u91CF\\u7684\\u5FAA\\u73AF\\u548C\\u5224\\u65AD\\u64CD\\u4F5C\\u5224\\u65AD\\u56FE\\u7247\\u662F\\u5426\\u53EF\\u89C6\\u533A\\u91CC\\uFF0C\\u56E0\\u6B64\\u9700\\u8981\\u7528\\u8282\\u6D41\\u8FDB\\u884C\\u4F18\\u5316\\u3002\"}),(0,n.jsxs)(e.h1,{id:\"\\u65B9\\u6CD5\\u4E00-lazyload-\\u63D2\\u4EF6\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B9\\u6CD5\\u4E00-lazyload-\\u63D2\\u4EF6\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u65B9\\u6CD5\\u4E00 lazyload \\u63D2\\u4EF6\"]}),(0,n.jsxs)(e.h2,{id:\"vue2\",children:[(0,n.jsx)(e.a,{href:\"#vue2\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"vue2\"]}),(0,n.jsxs)(e.p,{children:[\"github \\u5730\\u5740\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://github.com/hilongjw/vue-lazyload\",children:\"GitHub - hilongjw/vue-lazyload: A Vue.js plugin for lazyload your Image or Component in your applica\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u539F\\u7406\\uFF1A\",(0,n.jsxs)(e.a,{href:\"https://blog.csdn.net/babyxue/article/details/82986160?spm=1001.2014.3001.5506\",children:[\"Vue-lazyload \\u539F\\u7406\\u8BE6\\u89E3\\u4E4B\\u6E90\\u7801\\u89E3\\u6790\",(0,n.jsx)(e.em,{children:\"lazyload \\u5B9E\\u73B0\\u539F\\u7406\"}),\"\\u5C0F\\u4E03\\u7684\\u73A9\\u5076\\u7684\\u535A\\u5BA2-CSDN \\u535A\\u5BA2\"]})]}),(0,n.jsxs)(e.p,{children:[\"vue-lazyload \\u7684\\u6838\\u5FC3\\u539F\\u7406\\u662F\\u5229\\u7528\\u4E86\",(0,n.jsx)(e.code,{children:\"IntersectionObserver\"}),\" API\\uFF0C\\u8FD9\\u662F\\u4E00\\u4E2A\\u7528\\u4E8E\\u68C0\\u6D4B\\u5143\\u7D20\\u662F\\u5426\\u4E0E\\u89C6\\u53E3\\u76F8\\u4EA4\\u7684 API\\uFF0C\\u5B83\\u53EF\\u4EE5\\u9AD8\\u6548\\u5730\\u76D1\\u542C\\u5143\\u7D20\\u7684\\u53EF\\u89C1\\u6027\\u53D8\\u5316\\uFF0C\\u5E76\\u89E6\\u53D1\\u56DE\\u8C03\\u51FD\\u6570\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"vue-lazyload \\u5728\\u6CE8\\u518C\\u63D2\\u4EF6\\u65F6\\uFF0C\\u4F1A\\u521B\\u5EFA\\u4E00\\u4E2A\\u5168\\u5C40\\u7684\",(0,n.jsx)(e.code,{children:\"IntersectionObserver\"}),\"\\u5B9E\\u4F8B\\uFF0C\\u5E76\\u8BBE\\u7F6E\\u4E00\\u4E9B\\u9009\\u9879\\uFF0C\\u5982\\u9608\\u503C\\uFF08threshold\\uFF09\\u3001\\u6839\\u5143\\u7D20\\uFF08root\\uFF09\\u7B49\\u3002\\u7136\\u540E\\uFF0C\\u5728\\u7ED1\\u5B9A v-lazy \\u6307\\u4EE4\\u65F6\\uFF0C\\u4F1A\\u521B\\u5EFA\\u4E00\\u4E2A\\u76D1\\u542C\\u5668\\uFF08listener\\uFF09\\u5BF9\\u8C61\\uFF0C\\u5E76\\u5C06\\u5176\\u6DFB\\u52A0\\u5230\\u4E00\\u4E2A\\u76D1\\u542C\\u5668\\u961F\\u5217\\uFF08listenerQueue\\uFF09\\u4E2D\\u3002\\u6BCF\\u4E2A\\u76D1\\u542C\\u5668\\u5BF9\\u8C61\\u90FD\\u5305\\u542B\\u4E86\\u5143\\u7D20\\u7684\\u76F8\\u5173\\u4FE1\\u606F\\uFF0C\\u5982\\u72B6\\u6001\\uFF08state\\uFF09\\u3001\\u56FE\\u7247\\u5730\\u5740\\uFF08src\\uFF09\\u7B49\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u63A5\\u4E0B\\u6765\\uFF0Cvue-lazyload \\u4F1A\\u904D\\u5386\\u76D1\\u542C\\u5668\\u961F\\u5217\\uFF0C\\u5E76\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"IntersectionObserver\"}),\"\\u5B9E\\u4F8B\\u7684\",(0,n.jsx)(e.code,{children:\"observe\"}),\"\\u65B9\\u6CD5\\uFF0C\\u5C06\\u6BCF\\u4E2A\\u5143\\u7D20\\u6CE8\\u518C\\u5230\\u89C2\\u5BDF\\u8005\\u4E2D\\u3002\\u5F53\\u5143\\u7D20\\u4E0E\\u89C6\\u53E3\\u76F8\\u4EA4\\u65F6\\uFF0C\",(0,n.jsx)(e.code,{children:\"IntersectionObserver\"}),\"\\u5B9E\\u4F8B\\u4F1A\\u89E6\\u53D1\\u56DE\\u8C03\\u51FD\\u6570\\uFF0C\\u5E76\\u4F20\\u5165\\u4E00\\u4E2A entries \\u53C2\\u6570\\uFF0C\\u8868\\u793A\\u6240\\u6709\\u88AB\\u89C2\\u5BDF\\u7684\\u5143\\u7D20\\u7684\\u72B6\\u6001\\u4FE1\\u606F\\u3002vue-lazyload \\u4F1A\\u6839\\u636E entries \\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"isIntersecting\"}),\"\\u5C5E\\u6027\\u5224\\u65AD\\u5143\\u7D20\\u662F\\u5426\\u53EF\\u89C1\\uFF0C\\u5982\\u679C\\u662F\\uFF0C\\u5219\\u8C03\\u7528\\u76D1\\u542C\\u5668\\u5BF9\\u8C61\\u7684\",(0,n.jsx)(e.code,{children:\"load\"}),\"\\u65B9\\u6CD5\\uFF0C\\u5C06\\u5143\\u7D20\\u7684 src \\u6216\\u8005 style \\u5C5E\\u6027\\u66FF\\u6362\\u4E3A\\u771F\\u5B9E\\u7684\\u56FE\\u7247\\u5730\\u5740\\uFF0C\\u5E76\\u5C06\\u8BE5\\u76D1\\u542C\\u5668\\u5BF9\\u8C61\\u4ECE\\u961F\\u5217\\u4E2D\\u79FB\\u9664\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u5B89\\u88C5\"}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-TypeScript\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"npm i vue\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\"lazyload\",(0,n.jsxs)(e.span,{className:\"token decorator\",children:[(0,n.jsx)(e.span,{className:\"token operator at\",children:\"@\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"1\"})]}),(0,n.jsx)(e.span,{className:\"token number\",children:\".2\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\".3\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"S\"}),`\n`]})})}),(0,n.jsx)(e.p,{children:\"main.ts\"}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-TypeScript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 1.\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\\u63D2\\u4EF6\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" VueLazyload \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vue-lazyload'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 2.\\u6CE8\\u518C\\u63D2\\u4EF6\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Vue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"use\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"VueLazyload\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u53C2\\u6570\\u914D\\u7F6E \\u53EF\\u4E0D\\u586B\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u61D2\\u52A0\\u8F7D\\u9ED8\\u8BA4\\u52A0\\u8F7D\\u56FE\\u7247\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  loading\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'xxx.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u52A0\\u8F7D\\u5931\\u8D25\\u540E\\u52A0\\u8F7D\\u7684\\u56FE\\u7247\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  error\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'xxx.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  preLoad\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1.3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u9884\\u52A0\\u8F7D\\u9AD8\\u5EA6\\u7684\\u6BD4\\u4F8B\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  attempt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5C1D\\u8BD5\\u52A0\\u8F7D\\u6B21\\u6570\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u53EF\\u9009\\u53C2\\u6570\\u914D\\u7F6E\\u9879\"}),(0,n.jsx)(e.p,{children:\"vue-lazyload \\u63D0\\u4F9B\\u4E86\\u4E00\\u4E2A\\u81EA\\u5B9A\\u4E49\\u6307\\u4EE4 v-lazy\\uFF0C\\u53EF\\u4EE5\\u5728 img \\u6807\\u7B7E\\u6216\\u8005\\u4EFB\\u4F55\\u9700\\u8981\\u8BBE\\u7F6E\\u80CC\\u666F\\u56FE\\u7247\\u7684\\u6807\\u7B7E\\u4E0A\\u4F7F\\u7528\\u5B83\\u3002\\u4F8B\\u5982\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-HTML\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"\u003c!-- \\u61D2\\u52A0\\u8F7Dimg\\u6807\\u7B7E --\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"v-lazy\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"imgUrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"\u003c!-- \\u61D2\\u52A0\\u8F7D\\u80CC\\u666F\\u56FE\\u7247 --\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),\" \",(0,n.jsxs)(e.span,{className:\"token attr-name\",children:[(0,n.jsx)(e.span,{className:\"token namespace\",children:\"v-lazy:\"}),\"background-image\"]}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"bgUrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"v-lazy \\u6307\\u4EE4\\u63A5\\u6536\\u4E00\\u4E2A\\u5B57\\u7B26\\u4E32\\u7C7B\\u578B\\u7684\\u503C\\uFF0C\\u8868\\u793A\\u56FE\\u7247\\u7684\\u5730\\u5740\\u3002\\u5982\\u679C\\u662F\\u80CC\\u666F\\u56FE\\u7247\\uFF0C\\u9700\\u8981\\u5728\\u6307\\u4EE4\\u540E\\u52A0\\u4E0A\",(0,n.jsx)(e.code,{children:\":background-image\"}),\"\\u4FEE\\u9970\\u7B26\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u5F53\\u9875\\u9762\\u6EDA\\u52A8\\u65F6\\uFF0Cvue-lazyload \\u4F1A\\u68C0\\u6D4B\\u5143\\u7D20\\u662F\\u5426\\u8FDB\\u5165\\u53EF\\u89C6\\u533A\\u57DF\\uFF0C\\u5982\\u679C\\u662F\\uFF0C\\u5219\\u66FF\\u6362\\u5143\\u7D20\\u7684 src \\u6216\\u8005 style \\u5C5E\\u6027\\uFF0C\\u4ECE\\u800C\\u5B9E\\u73B0\\u61D2\\u52A0\\u8F7D\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u6CE8\\u610F\\uFF1A\\u82E5\\u56FE\\u7247\\u4E3A\\u5FAA\\u73AF\\u6E32\\u67D3\\u3001\\u5206\\u9875\\u663E\\u793A\\uFF0C\\u5219\\u5FC5\\u987B\\u5199 key \\u503C\\uFF0C\\u4E0D\\u7136\\u5207\\u6362\\u9875\\u9762\\u540E\\u9875\\u9762\\u89C6\\u56FE\\u4E0D\\u5237\\u65B0\"})}),(0,n.jsxs)(e.h2,{id:\"vue3\",children:[(0,n.jsx)(e.a,{href:\"#vue3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"vue3\"]}),(0,n.jsxs)(e.p,{children:[\"github \\u5730\\u5740\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://github.com/caozhong1996/vue-lazyload-next\",children:\"GitHub - caozhong1996/vue-lazyload-next: vue-lazyload for vue3\"})]}),(0,n.jsx)(e.p,{children:\"\\u539F\\u7406\\u4E0E\\u4F7F\\u7528\\u65B9\\u6CD5\\u4E0E vue2 \\u7248\\u672C\\u63D2\\u4EF6\\u76F8\\u540C\\uFF0C\\u4EC5\\u5B89\\u88C5\\u4E0D\\u540C\"}),(0,n.jsx)(e.p,{children:\"\\u5B89\\u88C5\"}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-HTML\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`npm i vue-lazyload-next -S\n`})})}),(0,n.jsx)(e.p,{children:\"main.ts\"}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-TypeScript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" VueLazyloadNext \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vue-lazyload-next'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"app\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"use\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"VueLazyloadNext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u6DFB\\u52A0\\u4E00\\u4E9B\\u914D\\u7F6E\\u53C2\\u6570 \\u53EF\\u4E0D\\u586B\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u61D2\\u52A0\\u8F7D\\u9ED8\\u8BA4\\u52A0\\u8F7D\\u56FE\\u7247\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  loading\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'xxx.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u52A0\\u8F7D\\u5931\\u8D25\\u540E\\u52A0\\u8F7D\\u7684\\u56FE\\u7247\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  error\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'xxx.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  preLoad\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1.3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u9884\\u52A0\\u8F7D\\u9AD8\\u5EA6\\u7684\\u6BD4\\u4F8B\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  attempt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5C1D\\u8BD5\\u52A0\\u8F7D\\u6B21\\u6570\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.h1,{id:\"\\u65B9\\u6CD5\\u4E8C-intersectionobserve\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B9\\u6CD5\\u4E8C-intersectionobserve\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u65B9\\u6CD5\\u4E8C IntersectionObserve()\"]}),(0,n.jsxs)(e.p,{children:[\"API\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver\",children:\"IntersectionObserver - Web API \\u63A5\\u53E3\\u53C2\\u8003 | MDN\"})]}),(0,n.jsxs)(e.h2,{id:\"\\u539F\\u7406-1\",children:[(0,n.jsx)(e.a,{href:\"#\\u539F\\u7406-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u539F\\u7406\"]}),(0,n.jsx)(e.p,{children:\"Intersection Observer \\u662F\\u662F\\u6D4F\\u89C8\\u5668\\u539F\\u751F\\u63D0\\u4F9B\\u7684\\u6784\\u9020\\u51FD\\u6570\\uFF0C\\u4F7F\\u7528\\u5B83\\u80FD\\u7701\\u5230\\u5927\\u91CF\\u7684\\u5FAA\\u73AF\\u548C\\u5224\\u65AD\\u3002\\u8FD9\\u4E2A\\u6784\\u9020\\u51FD\\u6570\\u7684\\u4F5C\\u7528\\u662F\\u5B83\\u80FD\\u591F\\u89C2\\u5BDF\\u53EF\\u89C6\\u7A97\\u53E3\\u4E0E\\u76EE\\u6807\\u5143\\u7D20\\u4EA7\\u751F\\u7684\\u4EA4\\u53C9\\u533A\\u57DF\\u3002\\u7B80\\u5355\\u6765\\u8BF4\\u5C31\\u662F\\u5F53\\u7528\\u5B83\\u89C2\\u5BDF\\u6211\\u4EEC\\u7684\\u56FE\\u7247\\u65F6\\uFF0C\\u5F53\\u56FE\\u7247\\u51FA\\u73B0\\u6216\\u8005\\u6D88\\u5931\\u5728\\u53EF\\u89C6\\u7A97\\u53E3\\uFF0C\\u5B83\\u90FD\\u80FD\\u77E5\\u9053\\u5E76\\u4E14\\u4F1A\\u6267\\u884C\\u4E00\\u4E2A\\u7279\\u6B8A\\u7684\\u56DE\\u8C03\\u51FD\\u6570\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5229\\u7528\\u8FD9\\u4E2A\\u56DE\\u8C03\\u51FD\\u6570\\u5B9E\\u73B0\\u9700\\u8981\\u7684\\u64CD\\u4F5C\\u3002\"}),(0,n.jsxs)(e.h2,{id:\"hook\",children:[(0,n.jsx)(e.a,{href:\"#hook\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"hook\"]}),(0,n.jsx)(e.p,{children:\"vue3 \\u4E2D\\u9009\\u62E9\\u7528 hook \\u8FDB\\u884C\\u96C6\\u6210\"}),(0,n.jsx)(e.p,{children:\"useLazyload.ts \\u6587\\u4EF6\"}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-TypeScript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5B9A\\u4E49\\u81EA\\u5B9A\\u4E49\\u6307\\u4EE4\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"defineDirective\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"app\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  app\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"directive\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'lazy'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"mounted\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"el\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" HTMLImageElement\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bindings\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// el\\u8868\\u793A\\u4F7F\\u7528\\u6307\\u4EE4\\u7684DOM\\u5143\\u7D20\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u6307\\u4EE4\\u7684\\u529F\\u80FD\\uFF1A\\u5B9E\\u73B0\\u56FE\\u7247\\u7684\\u61D2\\u52A0\\u8F7D\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 1\\u3001\\u76D1\\u542C\\u56FE\\u7247\\u662F\\u5426\\u8FDB\\u5165\\u53EF\\u89C6\\u533A\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" observer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IntersectionObserver\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" isIntersecting \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// true\\uFF1B\\u8FDB\\u5165\\u53EF\\u89C6\\u533A\\u57DF\\uFF0Cfalse\\uFF1A\\u672A\\u8FDB\\u5165\\u53EF\\u89C6\\u533A\\u57DF\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"isIntersecting\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 1\\u3001\\u7ED9\\u56FE\\u7247\\u7684src\\u5C5E\\u6027\\u8D4B\\u503C\\u56FE\\u7247\\u7684\\u5730\\u5740\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          el\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"src \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" bindings\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 2\\u3001\\u53D6\\u6D88\\u56FE\\u7247\\u7684\\u76D1\\u542C\\uFF0C\\u9ED8\\u8BA4\\u662F\\u4F1A\\u4E00\\u76F4\\u76D1\\u542C\\u7684\\uFF0C\\u5982\\u679C\\u4E0D\\u53D6\\u6D88\\u3002\\u5C31\\u4F1A\\u4E00\\u76F4\\u6267\\u884C\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// eslint-disable-next-line spellcheck/spell-checker\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          observer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"unobserve\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"el\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u76D1\\u542Cdom\\u5143\\u7D20\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      observer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"observe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"el\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"app\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u81EA\\u5B9A\\u4E49\\u6307\\u4EE4\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"defineDirective\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"app\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\u57FA\\u672C\\u7528\\u6CD5\",children:[(0,n.jsx)(e.a,{href:\"#\\u57FA\\u672C\\u7528\\u6CD5\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u57FA\\u672C\\u7528\\u6CD5\"]}),(0,n.jsx)(e.p,{children:\"main.ts\"}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-TypeScript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" lazy \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./hooks/useLazy'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"app\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"use\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"lazy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5BF9\\u9700\\u8981\\u8FDB\\u884C\\u61D2\\u52A0\\u8F7D\\u7684 img \\u6807\\u7B7E\\uFF0C\\u76F4\\u63A5\\u5C06\",(0,n.jsx)(e.code,{children:\":src\"}),\"\\u66FF\\u6362\\u4E3A\",(0,n.jsx)(e.code,{children:\"v-lazy\"})]}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-HTML\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),`\n`]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"class\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"image\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\":key\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"isCI ? data.rendered_result_image_url : data.rendered_standard_image_url\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"v-lazy\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"isCI ? data.rendered_result_image_url : data.rendered_standard_image_url\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u6CE8\\u610F\\uFF1A\\u82E5\\u56FE\\u7247\\u4E3A\\u5FAA\\u73AF\\u6E32\\u67D3\\u3001\\u5206\\u9875\\u663E\\u793A\\uFF0C\\u5219\\u5FC5\\u987B\\u5199 key \\u503C\\uFF0C\\u4E0D\\u7136\\u5207\\u6362\\u9875\\u9762\\u540E\\u9875\\u9762\\u89C6\\u56FE\\u4E0D\\u5237\\u65B0\"})}),(0,n.jsxs)(e.h1,{id:\"\\u65B9\\u6CD5\\u4E09-loadinglazy\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B9\\u6CD5\\u4E09-loadinglazy\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),'\\u65B9\\u6CD5\\u4E09 loading=\"lazy\"']}),(0,n.jsx)(e.p,{children:\"HTML \\u65B0\\u589E loading \\u5C5E\\u6027\"}),(0,n.jsxs)(e.h2,{id:\"\\u57FA\\u672C\\u7528\\u6CD5-1\",children:[(0,n.jsx)(e.a,{href:\"#\\u57FA\\u672C\\u7528\\u6CD5-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u57FA\\u672C\\u7528\\u6CD5\"]}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-HTML\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"img\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"xxx.png\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"loading\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"lazy\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})})}),(0,n.jsx)(e.p,{children:\"loading \\u5C5E\\u6027\\u652F\\u6301 3 \\u79CD\\u5C5E\\u6027\\u503C\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"auto \\u6D4F\\u89C8\\u5668\\u9ED8\\u8BA4\\u7684\\u61D2\\u52A0\\u8F7D\\u7B56\\u7565\\uFF0C\\u548C\\u4E0D\\u589E\\u52A0\\u8FD9\\u4E2A\\u5C5E\\u6027\\u7684\\u8868\\u73B0\\u4E00\\u6837\"}),(0,n.jsx)(e.li,{children:\"lazy \\u5728\\u8D44\\u6E90\\u8DDD\\u5F53\\u524D\\u89C6\\u7A97\\u5230\\u4E86\\u7279\\u5B9A\\u8DDD\\u79BB\\u5185\\u540E\\u518D\\u5F00\\u59CB\\u52A0\\u8F7D\"}),(0,n.jsx)(e.li,{children:\"eager \\u7ACB\\u5373\\u52A0\\u8F7D\\uFF0C\\u65E0\\u8BBA\\u8D44\\u6E90\\u5728\\u9875\\u9762\\u4E2D\\u4EC0\\u4E48\\u4F4D\\u7F6E\"})]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u56FE\\u7247\\u5FC5\\u987B\\u58F0\\u660E width \\u548C height\\uFF0C\\u4E0D\\u7136\\u4F1A\\u770B\\u5230\\u5E03\\u5C40\\u53D1\\u751F\\u79FB\\u52A8\"})}),(0,n.jsxs)(e.h2,{id:\"\\u517C\\u5BB9\\u6027\",children:[(0,n.jsx)(e.a,{href:\"#\\u517C\\u5BB9\\u6027\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u517C\\u5BB9\\u6027\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://caniuse.com/?search=loading\",children:\"https://caniuse.com/?search=loading\"})}),(0,n.jsxs)(e.h1,{id:\"\\u65B9\\u6CD5\\u56DB-\\u6EDA\\u52A8\\u76D1\\u542Cscrolltopoffsettopinnerheight\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B9\\u6CD5\\u56DB-\\u6EDA\\u52A8\\u76D1\\u542Cscrolltopoffsettopinnerheight\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u65B9\\u6CD5\\u56DB \\u6EDA\\u52A8\\u76D1\\u542C+scrollTop+offsetTop+innerHeight\"]}),(0,n.jsx)(e.p,{children:\"\\u5982\\u4F55\\u5224\\u65AD\\u5143\\u7D20\\u662F\\u5426\\u5230\\u8FBE\\u53EF\\u89C6\\u533A\\u57DF\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"window.innerHeight\"}),\" \\u662F\\u6D4F\\u89C8\\u5668\\u53EF\\u89C6\\u533A\\u7684\\u9AD8\\u5EA6\\uFF1B\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"document.body.scrollTop || document.documentElement.scrollTop\"}),\"\\u662F\\u6D4F\\u89C8\\u5668\\u6EDA\\u52A8\\u7684\\u8FC7\\u7684\\u8DDD\\u79BB\\uFF1B\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"imgs.offsetTop\"}),\" \\u662F\\u5143\\u7D20\\u9876\\u90E8\\u8DDD\\u79BB\\u6587\\u6863\\u9876\\u90E8\\u7684\\u9AD8\\u5EA6\\uFF08\\u5305\\u62EC\\u6EDA\\u52A8\\u6761\\u7684\\u8DDD\\u79BB\\uFF09\\uFF1B\"]}),(0,n.jsxs)(e.li,{children:[\"\\u5185\\u5BB9\\u8FBE\\u5230\\u663E\\u793A\\u533A\\u57DF\\uFF1A \",(0,n.jsx)(e.code,{children:\"img.offsetTop \u003c window.innerHeight + document.body.scrollTop;\"})]}),(0,n.jsxs)(e.li,{children:[\"\\u5230\\u8FBE\\u53EF\\u89C6\\u533A\\u57DF\\u540E\\uFF0C\",(0,n.jsx)(e.code,{children:\"imgs[i].src = imgs[i].getAttribute('data-src') as string;\"}),\"\\u5C06 data-src \\u5C5E\\u6027\\u503C\\u8D4B\\u503C\\u7ED9 src\\uFF0C\\u5B9E\\u73B0\\u61D2\\u52A0\\u8F7D\"]})]}),(0,n.jsxs)(e.p,{children:[\"\\u4F46\\u5728\\u96C6\\u6210\\u8FC7\\u7A0B\\u4E2D\\u53D1\\u73B0\\uFF0C\\u7531\\u4E8E img \\u7236\\u5143\\u7D20\\u6807\\u7B7E\\u6CA1\\u6709\\u8BBE\\u7F6E\\u9AD8\\u5EA6\\uFF0C\",(0,n.jsx)(e.code,{children:\"scrollTop\"}),\"\\u59CB\\u7EC8\\u4E3A 0\\uFF0C\\u65E0\\u6CD5\\u5B9E\\u73B0\\u52A8\\u6001\\u8BA1\\u7B97\",(0,n.jsx)(e.code,{children:\"window.innerHeight + document.body.scrollTop\"}),\"\\u7684\\u503C\"]}),(0,n.jsxs)(e.h1,{id:\"\\u65B9\\u6CD5\\u4E94\\u6EDA\\u52A8\\u76D1\\u542Cgetboundingclientrect\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B9\\u6CD5\\u4E94\\u6EDA\\u52A8\\u76D1\\u542Cgetboundingclientrect\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u65B9\\u6CD5\\u4E94\\uFF1A\\u6EDA\\u52A8\\u76D1\\u542C+getBoundingClientRect()\"]}),(0,n.jsxs)(e.p,{children:[\"API:\",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\",children:\"Element.getBoundingClientRect() - Web API \\u63A5\\u53E3\\u53C2\\u8003 | MDN\"})]}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-TypeScript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u83B7\\u53D6\\u6240\\u6709img\\u6807\\u7B7E\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" imgs \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" document\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getElementsByTagName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'img'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"onMounted\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u7528\\u4E8E\\u9996\\u5C4F\\u52A0\\u8F7D\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"lazyLoad\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u6DFB\\u52A0\\u6EDA\\u52A8\\u4E8B\\u4EF6\\u76D1\\u542C\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  document\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"addEventListener\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'scroll'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"throttle\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"lazyLoad\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"onUnMounted\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  document\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"removeEventListener\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'scroll'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"throttle\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"lazyLoad\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u8282\\u6D41\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"throttle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"fn\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"apply\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"arg0\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" arg1\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" flag \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" interval \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" t \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),\"args\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"flag\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"apply\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" args\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      flag \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setTimeout\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        flag \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" interval\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"lazyLoad\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" offsetHeight \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerHeight \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" document\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"documentElement\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"clientHeight\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"Array\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"from\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"imgs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"item \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" oBounding \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" item\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBoundingClientRect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u8FD4\\u56DE\\u4E00\\u4E2A\\u77E9\\u5F62\\u5BF9\\u8C61\\uFF0C\\u5305\\u542B\\u4E0A\\u4E0B\\u5DE6\\u53F3\\u7684\\u504F\\u79FB\\u503C\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c=\"}),\" oBounding\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"top \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" oBounding\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"top \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c=\"}),\" offsetHeight\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//     //\\u6027\\u80FD\\u4F18\\u5316 \\u8FDB\\u884C\\u5224\\u65AD \\u5DF2\\u7ECF\\u52A0\\u8F7D\\u7684\\u4E0D\\u4F1A\\u518D\\u8FDB\\u884C\\u52A0\\u8F7D\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"item\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'alt'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'loaded'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        item\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'src'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" item\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'data-src'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        item\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'alt'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'loaded'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\u7F3A\\u70B9\",children:[(0,n.jsx)(e.a,{href:\"#\\u7F3A\\u70B9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7F3A\\u70B9\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"\\u6302\\u8F7D\\u65F6\\u9700\\u8981\\u7ACB\\u523B\\u8C03\\u7528 lazyLoad \\u51FD\\u6570\\uFF0C\\u4E0D\\u7136\\u9996\\u5C4F\\u4E0D\\u4F1A\\u52A0\\u8F7D\\uFF1B\\u82E5\\u9700\\u8981\\u56FE\\u7247\\u5206\\u9875\\uFF0C\\u5207\\u6362\\u5206\\u9875\\u540E\\u4E0D\\u4F1A\\u4E5F\\u4E3B\\u52A8\\u52A0\\u8F7D\\uFF0C\\u9700\\u8981\\u8C03\\u7528 lazyLoad \\u65B9\\u6CD5\"}),(0,n.jsx)(e.li,{children:\"\\u540C\\u6837\\u9700\\u8981\\u7ED9\\u56FE\\u7247\\u8BBE\\u7F6E key \\u503C\\uFF0C\\u4E0D\\u7136\\u5206\\u9875\\u56FE\\u7247\\u4E0D\\u5237\\u65B0\"})]})]})}}var v=b;return y(z);})();\n;return Component;","toc":[{"value":"原理","url":"#原理","depth":1},{"value":"方法一 lazyload 插件","url":"#方法一-lazyload-插件","depth":1},{"value":"vue2","url":"#vue2","depth":2},{"value":"vue3","url":"#vue3","depth":2},{"value":"方法二 IntersectionObserve()","url":"#方法二-intersectionobserve","depth":1},{"value":"原理","url":"#原理","depth":2},{"value":"hook","url":"#hook","depth":2},{"value":"基本用法","url":"#基本用法","depth":2},{"value":"方法三 loading=\"lazy\"","url":"#方法三-loadinglazy","depth":1},{"value":"基本用法","url":"#基本用法","depth":2},{"value":"兼容性","url":"#兼容性","depth":2},{"value":"方法四 滚动监听+scrollTop+offsetTop+innerHeight","url":"#方法四-滚动监听scrolltopoffsettopinnerheight","depth":1},{"value":"方法五：滚动监听+getBoundingClientRect()","url":"#方法五滚动监听getboundingclientrect","depth":1},{"value":"缺点","url":"#缺点","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.43,"time":325800,"words":1086},"slug":"图片懒加载","fileName":"图片懒加载.md","title":"关于各种图片懒加载","date":"2023-05-25T03:42:17.000Z","lastmod":"2023/5/25 11:42:17","tags":["性能优化"],"draft":false,"summary":"背八股的时候只背了监听滚动事件，调研发现竟然有这么多实现方式……小编也不知道那种比较好，下面带你看看吧","images":"https://fastly.picsum.photos/id/14/2500/1667.jpg?hmac=ssQyTcZRRumHXVbQAVlXTx-MGBxm6NHWD3SryQ48G-o","authors":["default"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.17,"time":10200,"words":34},"slug":["default"],"fileName":"default.md","name":"Quelennuii","avatar":"/static/images/avatar.png","email":"gintoki1011@126.com","github":"https://github.com/Quelennuii","date":null}],"prev":{"title":"螺丝是怎么拧的","date":"2022-11-13T01:55:24.000Z","lastmod":"2024/2/21 16:07:19","tags":["实际应用"],"draft":false,"summary":"打螺丝熟练工（","images":"https://fastly.picsum.photos/id/13/2500/1667.jpg?hmac=SoX9UoHhN8HyklRA4A3vcCWJMVtiBXUg0W4ljWTor7s","authors":["default"],"layout":"PostLayout","slug":"螺丝是怎么拧的"},"next":null},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["图片懒加载"]},"buildId":"Ubh1e8E6BwMkosCvnRWpr","assetPrefix":"/Quelennuii.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>